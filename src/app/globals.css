@tailwind base;
@tailwind components;
@tailwind utilities;

/* Layout CSS Variables */
:root {
  --left-pane-width: 40%;
  --test-results-height: 50%;
  --background: #ffffff;
  --foreground: #171717;
}

/* Layout transitions */
.layout-container {
  --left-pane-width: 40%;
  --test-results-height: 50%;
}

.left-pane {
  width: var(--left-pane-width);
  transition: width 0.15s ease-out;
}

.right-pane {
  width: calc(100% - var(--left-pane-width));
  transition: width 0.15s ease-out;
}

.code-editor-container {
  height: calc(100% - var(--test-results-height));
  transition: height 0.15s ease-out;
}

.test-results-container {
  height: var(--test-results-height);
  transition: height 0.15s ease-out;
}

@theme inline {
  /* Legacy variables for backwards compatibility */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

/* Default CSS variables (fallback) */
:root {
  /* Base colors using HSL values without hsl() wrapper for Tailwind compatibility */
  --color-background: 0 0% 100%;
  --color-foreground: 220 30% 20%;
  --color-muted: 210 40% 98%;
  --color-muted-foreground: 215 13% 65%;
  
  /* Interactive elements */
  --color-primary: 221 83% 53%;
  --color-primary-foreground: 210 40% 98%;
  --color-secondary: 210 40% 96%;
  --color-secondary-foreground: 222 84% 5%;
  --color-accent: 210 40% 96%;
  --color-accent-foreground: 222 84% 5%;
  
  /* UI elements */
  --color-card: 0 0% 100%;
  --color-card-foreground: 222 84% 5%;
  --color-popover: 0 0% 100%;
  --color-popover-foreground: 222 84% 5%;
  
  /* Borders and separators */
  --color-border: 214 32% 91%;
  --color-input: 214 32% 91%;
  --color-ring: 221 83% 53%;
  
  /* Status colors */
  --color-success: 142 76% 36%;
  --color-success-foreground: 355 7% 97%;
  --color-warning: 38 92% 50%;
  --color-warning-foreground: 48 96% 89%;
  --color-error: 0 84% 60%;
  --color-error-foreground: 210 40% 98%;
  --color-info: 199 89% 48%;
  --color-info-foreground: 210 40% 98%;
  
  /* Code editor specific */
  --color-code-background: 0 0% 98%;
  --color-code-foreground: 0 0% 9%;
  --color-code-selection: 221 83% 93%;
  --color-code-comment: 215 13% 65%;
  --color-code-keyword: 262 83% 58%;
  --color-code-string: 142 76% 36%;
  --color-code-number: 221 83% 53%;
  --color-code-operator: 0 84% 60%;
}

/* Theme: default (blue) */
[data-theme="default"][data-mode="light"] {
  --color-background: 0 0% 100%;
  --color-foreground: 220 30% 20%;
  --color-muted: 210 40% 98%;
  --color-muted-foreground: 215 13% 65%;
  
  --color-primary: 221 83% 53%;
  --color-primary-foreground: 210 40% 98%;
  --color-secondary: 210 40% 96%;
  --color-secondary-foreground: 222 84% 5%;
  --color-accent: 210 40% 96%;
  --color-accent-foreground: 222 84% 5%;
  
  --color-card: 0 0% 100%;
  --color-card-foreground: 222 84% 5%;
  --color-popover: 0 0% 100%;
  --color-popover-foreground: 222 84% 5%;
  
  --color-border: 214 32% 91%;
  --color-input: 214 32% 91%;
  --color-ring: 221 83% 53%;
  
  --color-success: 142 76% 36%;
  --color-success-foreground: 355 7% 97%;
  --color-warning: 38 92% 50%;
  --color-warning-foreground: 48 96% 89%;
  --color-error: 0 84% 60%;
  --color-error-foreground: 210 40% 98%;
  --color-info: 199 89% 48%;
  --color-info-foreground: 210 40% 98%;
  
  --color-code-background: 0 0% 98%;
  --color-code-foreground: 0 0% 9%;
  --color-code-selection: 221 83% 93%;
  --color-code-comment: 215 13% 65%;
  --color-code-keyword: 262 83% 58%;
  --color-code-string: 142 76% 36%;
  --color-code-number: 221 83% 53%;
  --color-code-operator: 0 84% 60%;
}

[data-theme="default"][data-mode="dark"] {
  --color-background: 222 84% 5%;
  --color-foreground: 210 40% 98%;
  --color-muted: 217 33% 17%;
  --color-muted-foreground: 215 20% 65%;
  
  --color-primary: 217 91% 60%;
  --color-primary-foreground: 222 84% 5%;
  --color-secondary: 217 33% 17%;
  --color-secondary-foreground: 210 40% 98%;
  --color-accent: 217 33% 17%;
  --color-accent-foreground: 210 40% 98%;
  
  --color-card: 222 84% 5%;
  --color-card-foreground: 210 40% 98%;
  --color-popover: 222 84% 5%;
  --color-popover-foreground: 210 40% 98%;
  
  --color-border: 217 33% 17%;
  --color-input: 217 33% 17%;
  --color-ring: 217 91% 60%;
  
  --color-success: 142 70% 45%;
  --color-success-foreground: 144 61% 20%;
  --color-warning: 38 92% 50%;
  --color-warning-foreground: 48 96% 89%;
  --color-error: 0 63% 31%;
  --color-error-foreground: 210 40% 98%;
  --color-info: 199 89% 48%;
  --color-info-foreground: 210 40% 98%;
  
  --color-code-background: 217 33% 17%;
  --color-code-foreground: 210 40% 98%;
  --color-code-selection: 217 91% 25%;
  --color-code-comment: 215 20% 65%;
  --color-code-keyword: 262 83% 78%;
  --color-code-string: 142 70% 65%;
  --color-code-number: 217 91% 60%;
  --color-code-operator: 0 84% 80%;
}

/* Theme: ocean */
[data-theme="ocean"][data-mode="light"] {
  --color-background: 190 60% 98%;
  --color-foreground: 200 50% 10%;
  --color-muted: 190 50% 90%;
  --color-muted-foreground: 200 20% 40%;
  
  --color-primary: 200 98% 39%;
  --color-primary-foreground: 190 60% 98%;
  --color-secondary: 190 50% 90%;
  --color-secondary-foreground: 200 50% 10%;
  --color-accent: 180 100% 85%;
  --color-accent-foreground: 200 50% 10%;
  
  --color-card: 190 60% 98%;
  --color-card-foreground: 200 50% 10%;
  --color-popover: 190 60% 98%;
  --color-popover-foreground: 200 50% 10%;
  
  --color-border: 190 30% 85%;
  --color-input: 190 30% 85%;
  --color-ring: 200 98% 39%;
  
  --color-success: 160 84% 39%;
  --color-success-foreground: 190 60% 98%;
  --color-warning: 38 92% 50%;
  --color-warning-foreground: 48 96% 89%;
  --color-error: 0 84% 60%;
  --color-error-foreground: 190 60% 98%;
  --color-info: 200 98% 39%;
  --color-info-foreground: 190 60% 98%;
  
  --color-code-background: 190 50% 95%;
  --color-code-foreground: 200 50% 10%;
  --color-code-selection: 200 98% 90%;
  --color-code-comment: 200 20% 40%;
  --color-code-keyword: 200 98% 39%;
  --color-code-string: 160 84% 39%;
  --color-code-number: 200 98% 39%;
  --color-code-operator: 0 84% 60%;
}

[data-theme="ocean"][data-mode="dark"] {
  --color-background: 200 50% 10%;
  --color-foreground: 190 60% 95%;
  --color-muted: 200 50% 20%;
  --color-muted-foreground: 200 20% 65%;
  
  --color-primary: 200 98% 60%;
  --color-primary-foreground: 200 50% 10%;
  --color-secondary: 200 50% 20%;
  --color-secondary-foreground: 190 60% 95%;
  --color-accent: 200 50% 20%;
  --color-accent-foreground: 190 60% 95%;
  
  --color-card: 200 50% 10%;
  --color-card-foreground: 190 60% 95%;
  --color-popover: 200 50% 10%;
  --color-popover-foreground: 190 60% 95%;
  
  --color-border: 200 50% 20%;
  --color-input: 200 50% 20%;
  --color-ring: 200 98% 60%;
  
  --color-success: 160 84% 55%;
  --color-success-foreground: 200 50% 10%;
  --color-warning: 38 92% 50%;
  --color-warning-foreground: 48 96% 89%;
  --color-error: 0 84% 70%;
  --color-error-foreground: 200 50% 10%;
  --color-info: 200 98% 60%;
  --color-info-foreground: 200 50% 10%;
  
  --color-code-background: 200 50% 15%;
  --color-code-foreground: 190 60% 95%;
  --color-code-selection: 200 98% 25%;
  --color-code-comment: 200 20% 65%;
  --color-code-keyword: 200 98% 70%;
  --color-code-string: 160 84% 65%;
  --color-code-number: 200 98% 60%;
  --color-code-operator: 0 84% 80%;
}

/* Theme: forest */
[data-theme="forest"][data-mode="light"] {
  --color-background: 120 30% 98%;
  --color-foreground: 120 30% 10%;
  --color-muted: 120 20% 90%;
  --color-muted-foreground: 120 15% 40%;
  
  --color-primary: 120 60% 35%;
  --color-primary-foreground: 120 30% 98%;
  --color-secondary: 120 20% 90%;
  --color-secondary-foreground: 120 30% 10%;
  --color-accent: 90 50% 85%;
  --color-accent-foreground: 120 30% 10%;
  
  --color-card: 120 30% 98%;
  --color-card-foreground: 120 30% 10%;
  --color-popover: 120 30% 98%;
  --color-popover-foreground: 120 30% 10%;
  
  --color-border: 120 20% 85%;
  --color-input: 120 20% 85%;
  --color-ring: 120 60% 35%;
  
  --color-success: 120 60% 35%;
  --color-success-foreground: 120 30% 98%;
  --color-warning: 38 92% 50%;
  --color-warning-foreground: 48 96% 89%;
  --color-error: 0 84% 60%;
  --color-error-foreground: 120 30% 98%;
  --color-info: 199 89% 48%;
  --color-info-foreground: 120 30% 98%;
  
  --color-code-background: 120 20% 95%;
  --color-code-foreground: 120 30% 10%;
  --color-code-selection: 120 60% 90%;
  --color-code-comment: 120 15% 40%;
  --color-code-keyword: 120 60% 35%;
  --color-code-string: 140 70% 40%;
  --color-code-number: 120 60% 35%;
  --color-code-operator: 0 84% 60%;
}

[data-theme="forest"][data-mode="dark"] {
  --color-background: 120 30% 8%;
  --color-foreground: 120 30% 95%;
  --color-muted: 120 20% 18%;
  --color-muted-foreground: 120 15% 65%;
  
  --color-primary: 120 60% 55%;
  --color-primary-foreground: 120 30% 8%;
  --color-secondary: 120 20% 18%;
  --color-secondary-foreground: 120 30% 95%;
  --color-accent: 120 20% 18%;
  --color-accent-foreground: 120 30% 95%;
  
  --color-card: 120 30% 8%;
  --color-card-foreground: 120 30% 95%;
  --color-popover: 120 30% 8%;
  --color-popover-foreground: 120 30% 95%;
  
  --color-border: 120 20% 18%;
  --color-input: 120 20% 18%;
  --color-ring: 120 60% 55%;
  
  --color-success: 120 60% 55%;
  --color-success-foreground: 120 30% 8%;
  --color-warning: 38 92% 50%;
  --color-warning-foreground: 48 96% 89%;
  --color-error: 0 84% 70%;
  --color-error-foreground: 120 30% 8%;
  --color-info: 199 89% 60%;
  --color-info-foreground: 120 30% 8%;
  
  --color-code-background: 120 20% 12%;
  --color-code-foreground: 120 30% 95%;
  --color-code-selection: 120 60% 25%;
  --color-code-comment: 120 15% 65%;
  --color-code-keyword: 120 60% 75%;
  --color-code-string: 140 70% 65%;
  --color-code-number: 120 60% 55%;
  --color-code-operator: 0 84% 80%;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

/* Dark mode styles */
.dark {
  --background: #0a0a0a;
  --foreground: #ededed;
}

.light {
  --background: #ffffff;
  --foreground: #171717;
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
  transition:
    background-color 0.3s ease,
    color 0.3s ease;
}

/* Enhanced dark mode scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 4px;
}

.dark ::-webkit-scrollbar-track {
  background: #2d2d2d;
}

::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 4px;
}

.dark ::-webkit-scrollbar-thumb {
  background: #4a4a4a;
}

::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: #5a5a5a;
}

/* Mobile responsive improvements */
@media (max-width: 767px) {
  /* Ensure content doesn't get too cramped on small screens */
  .monaco-editor .margin {
    width: 40px !important;
  }

  /* Improve touch targets */
  button {
    min-height: 44px;
  }

  select {
    min-height: 44px;
  }

  /* Better spacing for mobile */
  .markdown-content {
    font-size: 0.9rem;
    line-height: 1.5;
  }

  .markdown-content h1 {
    font-size: 1.5rem;
  }

  .markdown-content h2 {
    font-size: 1.25rem;
  }

  .markdown-content h3 {
    font-size: 1.125rem;
  }

  .markdown-content pre {
    padding: 0.75rem;
    font-size: 0.8rem;
    overflow-x: auto;
  }

  .markdown-content code {
    font-size: 0.8rem;
  }
}

/* Ensure proper scrolling on mobile */
@media (max-width: 767px) {
  .overflow-y-auto {
    -webkit-overflow-scrolling: touch;
  }
}

/* Mobile responsive improvements */
@media (max-width: 767px) {
  /* Ensure content doesn't get too cramped on small screens */
  .monaco-editor .margin {
    width: 40px !important;
  }

  /* Improve touch targets */
  button {
    min-height: 44px;
  }

  select {
    min-height: 44px;
  }

  /* Better spacing for mobile */
  .markdown-content {
    font-size: 0.9rem;
    line-height: 1.5;
  }

  .markdown-content h1 {
    font-size: 1.5rem;
  }

  .markdown-content h2 {
    font-size: 1.25rem;
  }

  .markdown-content h3 {
    font-size: 1.125rem;
  }

  .markdown-content pre {
    padding: 0.75rem;
    font-size: 0.8rem;
    overflow-x: auto;
  }

  .markdown-content code {
    font-size: 0.8rem;
  }
}

/* Ensure proper scrolling on mobile */
@media (max-width: 767px) {
  .overflow-y-auto {
    -webkit-overflow-scrolling: touch;
  }
}

/* Custom scrollbar for webkit browsers */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}

/* Custom markdown styles */
.markdown-content {
  line-height: 1.6;
}

.markdown-content h1,
.markdown-content h2,
.markdown-content h3,
.markdown-content h4,
.markdown-content h5,
.markdown-content h6 {
  font-weight: 600;
  line-height: 1.25;
  margin-top: 1.5em;
  margin-bottom: 0.5em;
}

.markdown-content h1 {
  font-size: 1.875rem;
  font-weight: 700;
}

.markdown-content h2 {
  font-size: 1.5rem;
  font-weight: 600;
}

.markdown-content h3 {
  font-size: 1.25rem;
  font-weight: 600;
}

.markdown-content p {
  margin-bottom: 1rem;
  line-height: 1.6;
}

.markdown-content ul,
.markdown-content ol {
  margin-bottom: 1rem;
  padding-left: 1.5rem;
}

.markdown-content li {
  margin-bottom: 0.25rem;
}

.markdown-content code {
  background-color: #f3f4f6;
  padding: 0.125rem 0.25rem;
  border-radius: 0.25rem;
  font-size: 0.875rem;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
}

.dark .markdown-content code {
  background-color: #374151;
  color: #f9fafb;
}

.markdown-content pre {
  background-color: #1f2937;
  color: #f9fafb;
  padding: 1rem;
  border-radius: 0.5rem;
  overflow-x: auto;
  margin: 1rem 0;
}

.dark .markdown-content pre {
  background-color: #111827;
}

.markdown-content pre code {
  background-color: transparent;
  padding: 0;
  color: inherit;
}

.markdown-content blockquote {
  border-left: 4px solid #3b82f6;
  padding-left: 1rem;
  margin: 1rem 0;
  font-style: italic;
  background-color: #eff6ff;
  padding: 0.5rem 1rem;
  border-radius: 0.25rem;
}

.dark .markdown-content blockquote {
  background-color: #1e3a8a;
  color: #dbeafe;
}

.markdown-content table {
  width: 100%;
  border-collapse: collapse;
  margin: 1rem 0;
  border: 1px solid #d1d5db;
  border-radius: 0.5rem;
  overflow: hidden;
}

.dark .markdown-content table {
  border-color: #4b5563;
}

.markdown-content th,
.markdown-content td {
  padding: 0.5rem;
  text-align: left;
  border-bottom: 1px solid #e5e7eb;
}

.dark .markdown-content th,
.dark .markdown-content td {
  border-bottom-color: #4b5563;
}

.markdown-content th {
  background-color: #f9fafb;
  font-weight: 600;
}

.dark .markdown-content th {
  background-color: #374151;
  color: #f9fafb;
}

.markdown-content a {
  color: #2563eb;
  text-decoration: underline;
}

.dark .markdown-content a {
  color: #60a5fa;
}

.markdown-content a:hover {
  color: #1d4ed8;
}

.dark .markdown-content a:hover {
  color: #93c5fd;
}

.markdown-content hr {
  border: none;
  border-top: 1px solid #d1d5db;
  margin: 2rem 0;
}

.dark .markdown-content hr {
  border-top-color: #4b5563;
}

/* Enhanced focus styles for dark mode */
.dark *:focus {
  outline-color: #60a5fa;
}

/* Better selection colors */
::selection {
  background-color: #3b82f6;
  color: white;
}

.dark ::selection {
  background-color: #60a5fa;
  color: #1f2937;
}
